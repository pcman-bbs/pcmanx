2005-07-19  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp:
	Add (CTermView::HyperLinkHitTest)

	* src/mainframe.cpp:
	Add a "Reconnect" toolbar button and a "URL bar".
	Fix the ineffective CharPaddingX & CharPaddingY.

	* src/pcmanx_pure_gtk2.cpp
	* src/telnetview.cpp (CTelnetView::OnRButtonDown):
	Add "Copy URL" popup menu.
	
	* src/generalprefpage.cpp:
	Add "AntiAlias" option.

	* src/telnetcon.cpp 
	(CTelnetCon::Connect), 
	(CTelnetCon::ConnectThread), 
	(CTelnetCon::OnConnect), 
	(CTelnetCon::Cleanup):
	Better handling of multi-threading that prevent some crashes caused by 
	thread-unsafe libraries on some platforms.
	Limit the number of concurrent running threads to prevent explosive 
	increase on socket operation which often leads to connection failure.

2005-07-16  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/telnetcon.cpp:
	Apply patch file provided by chinsan.
	Make some modification to enable compilation on FreeBSD.

2005-07-16  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termdata.cpp, 
	src/termview.cpp:
	(CTermView::UpdateCaretPos) : Added
	(CTermData::UpdateCaret) : Removed
	Update position of IM cursor correctly.

	* src/editfavdlg.cpp:
	Enable editing of site settings by double clicking on the list.

	* src/pcmanx_inverse_xpm.xpm, 
	src/Makefile.am, 
	src/mainframe.cpp,
	src/mainframe.h:
	(CMainFrame::FlashWindow): Flash window icon to notify the user there's 
	new incomming message.
	(CMainFrame::IsActivated): Function to determine whether the main window
	is activated or not.

	* src/sitelistdlg.cpp:
	Enable searching by hitting 'Enter' key.

2005-07-16  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/site.cpp (CSite::SaveToFile):
	Minor bug fix for UseExternalTelnet.

	* src/telnetcon.cpp (CTelnetCon::OnSocket), (CTelnetCon::OnRecv):
	Fix a serious bug and prevent invalid io channel operation.

2005-07-16  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termdata.cpp (CTermData::UpdateCaret):
	Calculate caret position corectly.

	* src/termview.cpp:
	Add CTelnetCon::SetHorizontalCenterAlign().
	Terminal screen can be centered horizontally.
	Fix some problems with position calculation.

	* src/appconfig.h, src/appconfig.cpp:
	Add HCenterAlign data member.

	* src/mainframe.cpp (CMainFrame::NewCon):
	Call CTermView::SetHorizontalCenterAlign with proper parameter.

2005-07-16	FourDollars (Shih-yuan Lee)	<fourdollars@gmail.com>

	* src/termview.cpp:
	Fix bug of selected region.

2005-07-16  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/sitedlg.h,
	src/sitepage.cpp,
	src/termview.cpp,
	src/dialog.h,
	src/mainframe.h,
	src/emoticondlg.cpp,
	src/editfavdlg.cpp,
	src/view.cpp,
	src/appconfig.h,
	src/font.h,
	src/prefdlg.cpp,
	src/inputdialog.h,
	src/notebook.h,
	src/widget.h,
	src/listbox.h,
	src/telnetview.h,
	src/sitedlg.cpp,
	src/generalprefpage.h,
	src/sitelistdlg.h,
	src/mainframe.cpp,
	src/dialog.cpp,
	src/appconfig.cpp,
	src/sitepage.h,
	src/font.cpp,
	src/termview.h,
	src/site.h,
	src/emoticondlg.h,
	src/editfavdlg.h,
	src/inputdialog.cpp,
	src/view.h,
	src/notebook.cpp,
	src/widget.cpp,
	src/listbox.cpp,
	src/telnetview.cpp,
	src/sitelistdlg.cpp,
	src/generalprefpage.cpp,
	src/prefdlg.h,
	src/telnetcon.cpp:
	Add gcc specific #pragma to accelerate compilation.

	* src/mainframe.cpp (CMainFrame::NewCon), (CMainFrame::OnFont), 
	src/termview.cpp (CTermView::OnSize):
	Anti-alias font can be turned off now.

2005-07-16	FourDollars (Shih-yuan Lee)	<fourdollars@gmail.com>

	* src/termdata.cpp:
	* src/termview.cpp:
	Add horizontal align center.

2005-07-16  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termdata.cpp:
	Fix wrong color settings in default color table.

	* src/termview.cpp:
	Re-enable usage of m_CharPaddingX in character width calculation.
	Draw underlines of hyperlnks in different color.

	* src/site.cpp:
	* src/site.h:
	Add m_UseExternalTelnet and m_UseExternalSSH.

	* src/mainframe.cpp:
	Set proper hyperlink color on CTelnetView creation.

	* src/appconfig.cpp:
	Add hyperlink color settings.

	* src/telnetview.cpp (CTelnetView::OnKeyDown):
	Fix malfunction of keyboard input.

	* src/telnetcon.cpp (CTelnetCon::Connect), 
	(CTelnetCon::Close), (CTelnetCon::OnSocket):
	Add forkpty support and some bug fix.

	* configure.ac:
	Add -lutil to $LIBS.

2005-07-13  Jim Huang  <jserv@kaffe.org>

	* pcmanx-pure-gtk2.spec.in,
	configure.ac,
	Makefile.am:
	Generate package information with autotools.

2005-07-13  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termdata.cpp (CTermData::OnLineModified),
	src/telnetcon.cpp (CTelnetCon::OnLineModified), (CTelnetCon::OnBellTimer)
	(CTelnetCon::OnNewIncomingMessage):
	Add support to new incoming message detection.
	This interface can be used for adding automation in the future.
	All automation can be done in CTelnetCon::OnLineModified and
	CTelnetCon::OnNewIncomingMessage.

2005-07-12  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp (CTermView::OnPaint), (CTermView::DrawChar):
	Greatly improve drawing performance by update invalid area only.
	No more flicker will be seen when popup menus showed.

	* src/mainframe.cpp:
	Add "Reconnect" menu item and its handler.
	Make text colors of tabs indicate the state of connections.
	Fix the bug of "Confirm before closing connected connections".

	* src/telnetcon.cpp (CTelnetCon::Reconnect), 
	(CTelnetCon::OnConnect), (CTelnetCon::OnClose):
	Update tab title of connection when state chages.
	Minor bug fix.

2005-07-12  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/emoticondlg.cpp (CEmoticonDlg::SaveEmoticons):
	Minor bug fix.

2005-07-12  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/dialog.cpp (CDialog::OnResponse):
	Manually connect "response" signal to this handler can enable default 
	processing by CDialog.

	* src/emoticondlg.cpp, 
	src/emoticondlg.h, 
	data/emoticons:
	New File. Add some built-in emoticons frequently used on BBS sites.

	* src/inputdialog.cpp:
	Add a parameter to constructor to initialize the text in GtkEntry.

	* src/listboc.cpp (CListBox::GetItemText):
	Add this function to obtain text of specified row from the list box.

	* src/mainframe.cpp (CMainFrame::CreateMenu), (CMainFrame::OnEmoticons):
	Add emoticon menu item and its signal handler.

	* src/telnetview.cpp (CTelnetView::OnTextInput):
	Add support GDK_KP_* keysyms to enable input from keypad.

	* src/termview.cpp (CTermView::OnTextInput):
	Change the parameter to const.

2005-07-10  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/mainframe.cpp (CMainFrame::OnEverySecondTimer) (CMainFrame::OnSize), 
	src/pcmanx_pure_gtk2.cpp (main) :
	Add a timer to calculate idle time for all connections.
	Anti-Idle can function properly now.
	Save window size and position and restore it on startup.

	* src/termdata.cpp (CTermView::UpdateDisplay):
	Re-enable delayed sceen update to enhance drawing performance 
	and avoid some unnecessary flicker.

	* src/generalprefpage.cpp:
	Fix duplicated prefernce option.

	* src/telnetcon.cpp:
	Add idle time calculation.
	Yield another connection thread when retrying to connect. (In vain?)

2005-07-08  Jim Huang  <jserv@kaffe.org>

	* COPYING,
	src/*:
	Update the address of the FSF in the GPL, and all over the place.

2005-07-08  Jim Huang  <jserv@kaffe.org>

	* src/mainframe.h:
	Fixlet when --disable-docklet.

2005-07-08  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/mainframe.cpp (CMainFrame::OnAbout):
	Use a GTK+ 2.4x compatible About Dialog.

2005-07-08  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termdata.cpp,
	src/site.cpp,
	src/mainframe.cpp,
	src/appconfig.cpp,
	src/pcmanx_pure_gtk2.cpp,
	src/telnetview.cpp,
	src/sitelistdlg.cpp,
	src/telnetcon.cpp:
	Add missing header inclusion.

2005-07-08  Jim Huang  <jserv@kaffe.org>

	* configure.ac:
	Bump version to 0.1.1 .
	Add AM_CONDITIONAL of ENABLE_DEBUG.

2005-07-08  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/listbox.cpp (CListBox::GetCurSel):
	Minor bug fix.

2005-07-08  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp (CTermView::PasteFromClipboard):
	Some cleanup.

2005-07-07  Kanru Chen  <koster@debian.org.tw>

	* src/termview.cpp
	(CTermView::PasteFromClipboard) (CTermView::CopyToClipboard):
	Use user's encoding setting to convert clipboard strings.

2005-07-07  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp (CTermView::OnMouseMove):
	Display hand cursor when hyperlinks are hovered.

	* src/mainframe.cpp (CMainFrame::set_tray_icon):
	Fix abnormal size of tray icon.

	* src/appconfig.cpp:
	AppConfig.WebBrowser can be stored now.

	* src/telnetview.cpp:
	Add <ctype.h> include to avoid potential compilation errors.
	Reported by Anton  <anton.tw@gmail.com>.

2005-07-07  Jim Huang  <jserv@kaffe.org>

	* src/pcmanx_pure_gtk2.cpp:
	Add missing libintl / locale includes.

	* src/stringutil.cpp:
	Add <ctype.h> include to avoid potential compilation errors.
	Reported by Anton  <anton.tw@gmail.com>.

	* src/site.h: Perform some cleanup for naming.

	* autogen.sh:
	Quick fix against the strange intltool behavior.

	* TODO:
	For developers, please file your todo list here.

2005-07-07  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/pcmanx_pure_gtk2.cpp:
	Add "bindtextdomain" to correctly locate message catalog file.

2005-07-07  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/telnetcon.cpp (CTelnetCon::SendString):
	Replace all "\n" in string with correct CRLF before sent.
	
	* src/telnetview.cpp (CTelnetView::DoPasteFromClipboard):
	Bug fix.

2005-07-07  Jim Huang  <jserv@kaffe.org>

	* pcmanx.desktop.in:
	New file. Rename from pcmanx.desktop.

	* Makefile.am,
	configure.ac:
	Add entries for pcmanx.desktop generation.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* data/Makefile.am:
	Add install-hook.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/Makefile.am:
	Add all necessary headers to Makefile.am.

2005-07-06  Jim Huang  <jserv@kaffe.org>

	* src/Makefile.am:
	Fixlet to previous changes.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termdata.cpp (CTermData::UpdateDisplay),
	src/termview.cpp,
	src/widget.h,
	src/telnetview.cpp (CTelnetView::~CTelnetView),
	src/telnetcon.cpp:
	Minor bug fix.
	Temporarily disable dalayed screen update to prevent some problems.
	
	* src/mainframe.cpp (CMainFrame::SetCurView):
	Include the name of current connection in window title.

2005-07-07  Jim Huang  <jserv@kaffe.org>

	* src/Makefile.am,
	Makefile.am:
	Fixlet to missing EXTRA_DIST.
	Reported by PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/telnetcon.cpp: Minor bug Fix.

	* src/sitelistdlg.cpp:
	(CSiteListDlg::OnSearch): Minor bug fix.

	* data/sitelist:
	Replace the site list with the latest one.

2005-07-06  Jim Huang  <jserv@kaffe.org>

	* src/configfile.cpp (CConfigFile::CConfigFile):
	Use DATADIR (%prefix%/share) as data dir instead of /etc.
	
	* src/Makefile.am: Likewise.

	* data/Makefile.am,
	Makefile.am,
	configure.ac:
	Add rules for site list file.

	* AUTHORS: Updated.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/telnetcon.cpp
	(CTelnetCon::OnClose): Add "auto reconnect" support.
	Fix lots of thread-related bugs.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/mainframe.cpp
	(CMainFrame::OnFont): Disable "style" in font selection dialog.

	* src/appconfig.cpp, src/pcmanx_pure_gtk2.cpp:
	Add "Show tray icon" preference.

	* src/generalprefpage.cpp:
	Add "Show tray icon" and "Web browser" preference.

	* src/Makefile.am:
	Add all-local to strip the compiled executable file.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp:
	Some bug fix.
	
	* src/caret.cpp:
	Some minor bug fix.
	
	* src/mainframe.cpp
	(CMainFrame::LoadStartupSites):
	Automatically connect to some sites on startup.
	
	* src/telnetcon.cpp:
	Fix some problems related to multi-threading.
	
	* src/sitepage.cpp:
	Add "Connect on startup" check box.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp
	(CTermView::OnDestroy): Removed.
	(CTermView::OnBeforeDestroy): Destroy XftDraw correctly.
	Destructor of CTermView can be called properly now.

	* src/mainframe.cpp (CMainFrame::CloseCon):
	Use wrapper function provided by CNotebook instead of raw gtk+ API.

2005-07-06  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termdata.cpp (CTermView::UpdateDisplay)
	src/termdata.h:
	Delay some sceen update when needed. Enhance drawing performance 
	and avoid some unnecessary flicker.

2005-07-03  Kanru Chen  <koster@debian.org.tw>

	* src/sitepage.cpp,
	src/sitepage.h,
	src/termview.cpp,
	src/site.cpp,
	src/mainframe.cpp,
	src/appconfig.cpp,
	src/termdata.h,
	src/site.h,
	src/telnetview.cpp:
	Add encoding preference.

2005-07-05  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp (CTermView::DrawChar):
	Enable drawing one double-byte character with two different colors.

2005-07-05  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/termview.cpp (CTermView::SetFontFamily):
	Recalculate font size when font family is changed.

2005-07-05  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/widget.cpp (CWidget::Refresh):
	Fix a typo.

2005-07-05  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/font.cpp (CFont::CreateXftFont):
	Fix some problems in font size calculation.

	* src/font.h (CFont::GetMaxWidth):
	Ensure that max width can be devided by 2.

2005-07-04  Shih-yuan Lee  <fourdollars@gmail.com>

	* src/widget.cpp
	(delete_CWidget): Check object existence before releasing.
	(CWidget::Refresh): Rename rect to t_Rect.
	(CWidget::CWidget): Use naming rules.

	* Doxygen.in:
	Add more information.

2005-07-04  Jim Huang  <jserv@kaffe.org>

	* src/mainframe.cpp (CMainFrame::set_tray_icon):
	Create new pixbuf according to the allocated width of m_TrayIcon.
	NOTE: PCMan reported a strange behavior of tray icons padding
	under KDE 3.3 .

2005-07-04  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* src/pcmanx_pure_gtk2.cpp (main):
	Remove redundant CWidget::Init.

	* src/widget.h
	(CWidget::OnIdleCleanup) (CWidget::Init)
	(CWidget::m_WidgetsToBeDeleted): Removed.
	
	* src/widget.cpp
	(CWidget::OnDestroy) (CWidget::OnIdleCleanup): Implementation removed.
	(delete_CWidget): New helper function.
	(CWidget::OnIdleCleanup): Invoke delete_CWidget while idle via
	g_idle_add_full.
	Fix the most serious bug which cause extremely high system load.

2005-07-04  Jim Huang  <jserv@kaffe.org>

	* src/mainframe.h:
	Rename m_Tray_icon to m_TrayIcon_Instance.
	(CMainFrame::set_tray_icon): New helper function splitted from
	constructor to handle tray icon routines.
	(CMainFrame::m_TrayButton) (CMainFrame::m_TrayIcon): New member
	data. Likewise.

	* src/pcmanx_pure_gtk2.cpp (main):
	Adjust m_Tray_icon naming change.

	* src/mainframe.cpp
	(CMainFrame::CMainFrame): Use new helper function, set_tray_icon,
	and make sure m_MainIcon is null at startup.
	(CMainFrame::OnTrayButton_Changed): Implemented via invoking 
	set_tray_icon.

2005-07-03  Kanru Chen  <koster@debian.org.tw>
	
	* src/mainframe.cpp
	(CMainFrame::CloseCon):
	Remove correct note page and move to next page.

	* src/termview.cpp
	(CTermView::OnDestroy) (CTermView::~CTermView):
	Move XftDrawDestroy(m_XftDraw) to destructor to avoid X error,
	however, actually this destructor never be called because strange
	CWidget behavior. Need to FIX. Warn: memory leak.

	* src/caret.cpp,
	src/termview.cpp,
	src/widget.cpp:
	Some debug message.

2005-07-03  Jim Huang  <jserv@kaffe.org>

	* sitelistdlg.cpp (CSiteListDlg::LoadSiteList):
	Workaround of new GTK_STOCK_DIRECTORY macro introduced in GTK+ 2.6 .
	Reported by Chung-Yen Chang  <candyz@cle.linux.org.tw>.
	NOTE: Still some incompatibility to be fixed later.
	
	* po/pcmanx.pot:
	New file. Missing translation template.

	* autogen.sh:
	Add workaround of some cases that mkinstalldirs was not correctly
	installed.

2005-07-03  Jim Huang  <jserv@kaffe.org>

	* src/mainframe.cpp
	(CMainFrame::OnTrayButton_Toggled):
	Temporal workaround of G_GNUC_UNUSED attribute.
	Reported by Kanru Chen  <koster@debian.org.tw>.

2005-07-03  Jim Huang  <jserv@kaffe.org>

	* src/docklet/clipboard.c:
	New file. X clipboard hack to detect if daemon is running.

	* src/docklet/eggtrayicon.c,
	src/docklet/eggtrayicon.h:
	New files. Famous EggTrayIcon written by Anders Carlsson
	<andersca@gnu.org>.

	* configure.ac,
	src/Makefile.am:
	Add docklet / system tray support option. Default: enabled.

	* src/mainframe.h
	(CMainFrame::OnTrayButton_Toggled) (CMainFrame::OnTrayButton_Changed):
	New protected methods act as the callback functions for Tray button
	toggled and size-changed.
	(EggTrayIcon *m_Tray_icon):
	New public member data for holding tray icon.

	* src/mainframe.cpp
	(CMainFrame::OnTrayButton_Toggled) (CMainFrame::OnTrayButton_Changed):
	Likewise.
	(CMainFrame::CMainFrame):
	Add primitive tray icon and event handling for docklet / system tray.
	NOTE: we might need a customized tray icon due to size limitation.

	* src/pcmanx_pure_gtk2.cpp (main):
	Make sure that there is only single instance, and show docklet.
	NOTE: we might create higher level method for this task.

2005-07-02  Jim Huang  <jserv@kaffe.org>

	* src/pcmanx_pure_gtk2.cpp:
	Use GETTEXT_PACKAGE instead of hard-coded names.

2005-07-02  Jim Huang  <jserv@kaffe.org>

	* src/termview.cpp (CTermView::RedrawSel):
	Minor tweaking for MAX3 and MIN3 macro for better readability.

2005-07-02  Jim Huang  <jserv@kaffe.org>

	* src/mainframe.cpp 
	(CMainFrame::CreateMenu): Remove puzzling comments which confuse
	intltool.
	(CMainFrame::OnAbout): Update homepage information.

	* src/pcmanx_pure_gtk2.cpp (main):
	Adjust the sequence of gtk_init and g_thread_init, and use fake
	argc/agrv to avoid redundant parsing.

	* po/zh_TW.po: Regenerated.

2005-07-02  Kanru Chen  <koster@debian.org.tw>
	
	* configure.ac:
	Change AC_DEFINE(VERSION,...) to AC_DEFINE_UNQUOTED ensure really
	defined this variable.
	
	* ABOUT-NLS:
	New file. need by automake-1.9.

2005-07-02  Jim Huang  <jserv@kaffe.org>

	* src/termview.cpp (CTermView::OnLButtonDown),
	src/configfile.cpp (CConfigFile::DoLoad) (CConfigFile::DoSave),
	src/appconfig.cpp (CAppConfig::LoadFavorites),
	src/sitelistdlg.cpp (CSiteListDlg::OnSearch):
	Remove misleading \!\! expression.

2005-07-02  Kanru Chen  <koster@debian.org.tw>

	* src/font.cpp 
	(CFont::CreateXftFont(string, int, int, bool)):
	Adjust font size policy to prevent infinite loop.

	* src/widget.cpp,
	src/telnetcon.cpp:
	Add usleep(100) between each idle call to prevent cpu load
	too high.

2005-07-02  Jim Huang  <jserv@kaffe.org>

	* po/POTFILES.in:
	New file. Put the source filenames to be translated here.

	* configure.ac:
	Enhance GNU Gettext support.

	* src/Makefile.am:
	Include *.xpm in EXTRA_DIST.

	* po/zh_TW.po:
	Updated according to new layout.

2005-07-02  Jim Huang  <jserv@kaffe.org>

	* autogen.sh,
	configure.ac,
	Doxygen.in,
	Makefile.am,
	src/Makefile.am:
	New files. Autotools support.

	* po/zh_TW.po:
	Adjust translated messages path.

2005-07-02  Kanru Chen  <koster@debian.org.tw>

	* src/Makefile-byhand:
	Cleanup pkgconfig rules.

2005-07-01  PCMan (Hong Jen Yee)  <hzysoft@sina.com.tw>

	* Initial import of pcmanx_pure_gtk2.
